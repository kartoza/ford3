{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block head %}
    {{ wizard.form.media }}
    <link rel="stylesheet" type="text/css"
          href="{% static 'css/wizard_form.css' %}">
    <link rel="stylesheet" type="text/css"
          href="{% static 'css/libs/jquery-ui-1.12.1-custom/jquery-ui.min.css' %}">
	    <link rel="stylesheet" type="text/css"
          href="{% static 'css/qualification_form.css' %}">
{% endblock %}

{% block body %}

    <div class="container">
        <div class="row">
            <div class='col-md-12'>
                <h3>{{ qualification }}</h3>
            </div>
            <div class="col-lg-12">
                <ul class="nav-wizard-steps nav nav-pills nav-fill">
                    {% for form_name in form_name_list %}
                        <li class="nav-item">
                            <a class="nav-link
                            {% if forloop.counter == wizard.steps.step1 %}
                                active
                            {% elif forloop.counter < wizard.steps.step1 %} done {% else %} disabled {% endif %}" href="#">
                                <h4 class="list-group-item-heading
                                    {% if forloop.counter == wizard.steps.step1 %}
                                        active
                                    {% elif forloop.counter < wizard.steps.step1 %} done {% else %} disabled {% endif %}">

                                    Step {{ forloop.counter }}</h4>
                                <p class="list-group-item-text">{{ form_name }}</p>
                            </a>
                        </li>
                    {% endfor %}

                </ul>


				  {% if wizard.steps.step1 == 4 %}
                    <div class='row border-bottom mb-3 no-gutters' id='occupations-form'>
                        <div class='col-md-12'>
                            <label>Choose up to five occupations</label>
                            <input type='hidden' id='list-occupations-url' value='{% url "list-occupations" %}' />
                            <div class='row'>
                                <div class='col-md-4'>
                                    <input type='text' id='search-occupations' placeholder='e.g: Accountant' />
                                    <div id='search-no-result' class='d-none mt-2'>
                                        <div class='alert alert-danger'>No result</div>
                                    </div>                                    
                                </div>
                                <div class='col-md-8 align-middle'>
                                    <ul id='the-alphabet' class='m-0 p-0'></ul>
                                </div>
                            </div>
                            <div class='row mt-2 pt-2 no-gutters'>
                                <div class='col-md-12'>
                                    <div class='row no-gutters h-100'>
                                        <div class='col-md-12'>
                                            <ul id='selected-occupations' class='m-0 p-0 border-top border-bottom'>
												{% for occupation in occupations %}
													<li class='h-100' data-occupation-id='{{ occupation.id }}'>
														{{ occupation.name }}
														<span>X</span>
													</li>
												{% endfor %}
											</ul>
                                        </div>
                                    </div>
                                </div>
                                <div class='col-md-12'>
                                    <div id='occupations-list'></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                {% endif %}

                <form action="" method="post">{% csrf_token %}
                    <div class="form-group">
                        {{ wizard.management_form }}
                        {% if wizard.form.forms %}
                            {{ wizard.form.management_form }}
                            {% crispy wizard.form wizard.form.helper %}
                        {% else %}
                            {% crispy wizard.form wizard.form.helper %}
                        {% endif %}
                    {% if wizard.steps.step1 == 3 %}
	                    <div>
		                    {% for each_subject in subjects_list %}
			                    <div id="div_id_2-subject" class="form-group row">
				                    <label for="id_2-subject"
				                           class="col-form-label col-md-3">
					                    Subject {{ each_subject.index }}:
				                    </label>
				                    <div class="col-md-9 row">
					                    <select name="2-subject" class="col-md-4 select form-control" id="id_2-subject">
						                    <option value="{{ each_subject.id }}" selected="">{{ each_subject.name }}</option>
					                    </select>
						                    <div class="col-md-4">
							                    <input type="number"
							                           name="2-subject-minimum-score"
							                           placeholder="Minimum Score"
							                           class="textInput form-control subject-minimum-score"
							                           value="{{ each_subject.minimum_score }}">
						                    </div>
						                    <div class="col-md-4">
							                    <button type="button" class="remove-subject-btn btn btn-default" onclick="removeSubject(this)">Remove Subject</button>
						                    </div>
				                    </div>
			                    </div>
		                    {% endfor %}
	                    </div>
	                {% endif %}
                    </div>
	                {% if wizard.steps.step1 == 5 %}
		                <div>
			                {% for each_event in events_list %}
				                <div>
					                <div class="row">
						                <div class="col-10">
							                <hr>
						                </div>
						                <div class="col-1">
							                <div class="remove-qualification-event-button">
								                <div class="remove-qualification-button-inner ">X</div>
							                </div>
						                </div>
					                </div>
				                </div>
				                <div id="div_id_4-name"
				                     class="form-group row"><label
						                for="id_4-name"
						                class="col-form-label col-md-3 requiredField">
					                Event name<span
						                class="asteriskField">*</span>
				                </label>
					                <div class="col-md-9">
						                <input type="text"
						                       name="4-name"
						                       placeholder="eg. Applications"
						                       class="textinput textInput form-control"
						                       required=""
						                       id="id_4-name"
						                       value="{{ each_event.name }}">
					                </div>
				                </div>
				                <div id="div_id_4-date_start"
				                     class="form-group row"><label
						                for="id_4-date_start"
						                class="col-form-label col-md-3 requiredField">
					                Starting date<span
						                class="asteriskField">*</span>
				                </label>
					                <div class="col-md-9">
						                <input type="text"
						                       name="4-date_start"
						                       class="col-md-4 dateinput form-control hasDatepicker"
						                       placeholder="mm/dd/yyyy"
						                       required=""
						                       id="id_4-date_start"
						                       value="{{ each_event.date_start|date:'m/d/Y' }}">
					                </div>
				                </div>
				                <div id="div_id_4-date_end"
				                     class="form-group row"><label
						                for="id_4-date_end"
						                class="col-form-label col-md-3 requiredField">
					                Ending date<span
						                class="asteriskField">*</span>
				                </label>
					                <div class="col-md-9">
						                <input type="text"
						                       name="4-date_end"
						                       class="col-md-4 dateinput form-control hasDatepicker"
						                       placeholder="mm/dd/yyyy"
						                       required=""
						                       id="id_4-date_end"
						                       value="{{ each_event.date_end|date:'m/d/Y' }}">
					                </div>
				                </div>
				                <div id="div_id_4-http_link"
				                     class="form-group row"><label
						                for="id_4-http_link"
						                class="col-form-label col-md-3">
					                Link to event
				                </label>
					                <div class="col-md-9">
						                <input type="text"
						                       name="4-http_link"
						                       placeholder="http://..."
						                       class="textinput textInput form-control"
						                       id="id_4-http_link"
						                       value="{{ each_event.http_link }}">
					                </div>
				                </div>
			                {% endfor %}
		                </div>

		                <div class="row">
			                <div class="col-md-8"></div>
			                <div class="col-md-4">
				                <button id="add-qualification-event"
				                        class="edu-button edu-button-orange">
					                Add event
				                </button>
			                </div>
		                </div>
	                {% endif %}
                    <div class="row form-actions">
                        <div class="col-md-4">
                            {% if wizard.steps.prev %}
                                <button class="edu-button edu-button-blue"
                                        name="wizard_goto_step" type="submit"
                                        value="{{ wizard.steps.prev }}">Prev
                                    step
                                </button>
                            {% endif %}
                        </div>
                        <div class="col-md-4">
                        </div>
                        <div class="col-md-4">
                            <button class="edu-button edu-button-blue"
                                    type="submit"
                                    value="submit"
                                    id="my-next-button">
                                {% if wizard.steps.next %}
                                    Next
                                {% else %}
                                    Submit
                                {% endif %}
                            </button>
                        </div>
                    </div>
                </form>

            </div>
        </div>
    </div>

{% endblock %}

{% block footer %}
    <script type="text/javascript"
            src="{% static 'js/libs/jquery-ui-1.12.1-custom/jquery-ui.min.js' %}"></script>
    <script type="text/javascript"
            src="{% static 'js/qualification_form.js' %}"></script>
{% if wizard.steps.step1 == 4 %}
    <script type="text/javascript" src="{% static 'js/qualification_occupations.js' %}"></script>
{% endif %}
{% endblock %}
